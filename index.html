<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <style>
    #map-canvas {
        width: 100%;
        height: 500px;
    }

    .layer-wizard-search-label {
        font-family: sans-serif
    }
    </style>
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false&key=AIzaSyB585wgEBKusH8EiiTyjFDBXAexiBdiOuc">
    </script>
    <script type="text/javascript">
    var map;
    var layer_0;
    var layer_1;

    function initialize() {
        map = new google.maps.Map(document.getElementById('map-canvas'), {
            center: new google.maps.LatLng(13.029694732503145, 77.61281670361325),
            zoom: 11,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        layer_0 = new google.maps.FusionTablesLayer({
            query: {
                select: "col0>>1",
                from: "1hyvUjITN-m0aeemCjxQ5lkFUPUhb6tn8FIMMe4oU"
            },
            map: map,
            styleId: 2,
            templateId: 2
        });
        layer_1 = new google.maps.FusionTablesLayer({
            query: {
                select: "col1",
                from: "1JMgo8mhZ2A2SwDMJo3ujWI8kZKTSLV8bpn20saip"
            },
            map: map,
            styleId: 2,
            templateId: 2
        });
    }

    function changeMap_0() {
        var whereClause;
        var searchString = document.getElementById('search-string_0').value.replace(/'/g, "\\'");
        if (searchString != '--Select--') {
            whereClause = "'Location' CONTAINS IGNORING CASE '" + searchString + "'";
        }
        layer_0.setOptions({
            query: {
                select: "col0>>1",
                from: "1hyvUjITN-m0aeemCjxQ5lkFUPUhb6tn8FIMMe4oU",
                where: whereClause
            }
        });
    }

    function changeMap_1() {
        var whereClause;
        var searchString = document.getElementById('search-string_1').value.replace(/'/g, "\\'");
        if (searchString != '--Select--') {
            whereClause = "'HC Name' = '" + searchString + "'";
        }
        layer_1.setOptions({
            query: {
                select: "col1",
                from: "1JMgo8mhZ2A2SwDMJo3ujWI8kZKTSLV8bpn20saip",
                where: whereClause
            }
        });
    }

    google.maps.event.addDomListener(window, 'load', initialize);
    google.maps.event.addListenerOnce(map, 'tilesloaded', function() {
        infowindow.open(map, marker);
    });
     </script>
</head>

<body>
    <div id="map-canvas"></div>
    <div class="container">
        <div class="row col-lg-12" style="margin-top: 10px;">
            <div class="col-lg-10">
                <div class="form-group">
                    <input type="text" class="form-control" id="search-string_0" placeholder="Search via Pin code">
                </div>
            </div>
            <div class="col-lg-2">
                <button class="btn btn-primary btn-block" onclick="changeMap_0()">Search</button>
            </div>
        </div>
        <div class="row col-lg-12" style="margin-top: 10px;">
            <label for="search-string_1">Search HC</label>
            <select id="search-string_1" onchange="changeMap_1(this.value);" class="form-control">
                <option value="--Select--">All HCs</option>
                <option value="Lokesh V">Lokesh V</option>
                <option value="Manjunath">Manjunath</option>
                <option value="Moses">Moses</option>
                <option value="Prince">Prince</option>
                <option value="Rahul">Rahul</option>
                <option value="Rajkumar">Rajkumar</option>
                <option value="Sagar">Sagar</option>
                <option value="Fayaz">Fayaz</option>
            </select>
        </div>
    </div>
</body>

</html>
