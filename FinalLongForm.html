<!doctype html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Truweight Wellness, Home Consultation</title>
    <link rel="icon" type="image/png" href="https://2o42f91vxth73xagf92zhot2-wpengine.netdna-ssl.com/wp-content/uploads/2015/11/16x16.png">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <!-- FA5 -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">
    <script src="https://truweight.in/wp-content/themes/healthcoach/page-templates/BMI/gauge.js"></script>
    <link rel="stylesheet" href="https://truweight.in/wp-content/themes/healthcoach/page-templates/BMI/odometer.css" />
    <script src="https://truweight.in/wp-content/themes/healthcoach/page-templates/BMI/odometer.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://truweight.in/date.js"></script>
</head>

<body>
    <style type="text/css">
    input[type=checkbox],
    input[type=radio] {
        width: 17px;
        height: 17px;
    }

    body {
        font-family: Ubuntu;
    }

    .errorBorder {
        border-color: #f30a0a;
        box-shadow: 0 0 0 0.2rem rgba(255, 0, 0, 0.25);
    }

    .cardShad {
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
    }

    .btn {
        transition: all 0.3s cubic-bezier(.25, .8, .25, 1);
    }

    .btn:hover {
        box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
    }

    .modal-footer {
        padding: 0.5rem !important;
    }

    input[type='number'] {
        -moz-appearance: textfield;
    }
    /* Webkit browsers like Safari and Chrome */

    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    .card-bodySugg {
        display: flex;
        justify-content: space-between;
    }
    </style>
    <div class="container" style="padding-top: 18px; padding-bottom: 22px;">
        <div class="card cardShad">
            <div class="card-header">
                <img src="https://2o42f91vxth73xagf92zhot2-wpengine.netdna-ssl.com/wp-content/uploads/2015/11/Logo-FIne.png" alt="Truweight" style="width: 90px;">
            </div>
            <div class="card-body" style="padding: 0.8rem;">
                <div>
                    <p style="padding: 16px; border-radius: 5px; background-color: #f7f6f6;" id="titleMsg">Hey there, thanks for your interest. Before enrolling in a weightloss program, we recommend starting with checking your BMI and how much Kgs you need to lose.</p>
                    <div id="inpGrp" style="padding-left: 10px; padding-right: 10px;">
                        <div id="step1Section">
                            <div class="input-group" id="weightInputOutline">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="weightIconSpan"><i class="fas fa-weight"></i></span>
                                </div>
                                <input type="number" id="weightInput" class="form-control" placeholder="Enter your weight" aria-label="Weight" aria-describedby="weightIconSpan" maxlength="3" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);">
                            </div>
                            <span style="visibility: hidden;  color: red; font-size: 13px;" class="mb-2" id="weightError">Error</span>
                            <div class="input-group" id="heightInputOutline">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="heightIconSpan" style="width: 42px;">
                                <i style="margin-left: 5px;" class="fas fa-arrows-alt-v"></i></span>
                                </div>
                                <select class="form-control" id="heightInput">
                                    <option value="0" selected disabled>Select your Height (ft.in)</option>
                                    <option value="4ft.0in">4ft.0in</option>
                                    <option value="4ft.1in">4ft.1in</option>
                                    <option value="4ft.2in">4ft.2in</option>
                                    <option value="4ft.3in">4ft.3in</option>
                                    <option value="4ft.4in">4ft.4in</option>
                                    <option value="4ft.5in">4ft.5in</option>
                                    <option value="4ft.6in">4ft.6in</option>
                                    <option value="4ft.7in">4ft.7in</option>
                                    <option value="4ft.8in">4ft.8in</option>
                                    <option value="4ft.9in">4ft.9in</option>
                                    <option value="4ft.10in">4ft.10in</option>
                                    <option value="4ft.11in">4ft.11in</option>
                                    <option value="5ft.0in">5ft.0in</option>
                                    <option value="5ft.1in">5ft.1in</option>
                                    <option value="5ft.2in">5ft.2in</option>
                                    <option value="5ft.3in">5ft.3in</option>
                                    <option value="5ft.4in">5ft.4in</option>
                                    <option value="5ft.5in">5ft.5in</option>
                                    <option value="5ft.6in">5ft.6in</option>
                                    <option value="5ft.7in">5ft.7in</option>
                                    <option value="5ft.8in">5ft.8in</option>
                                    <option value="5ft.9in">5ft.9in</option>
                                    <option value="5ft.10in">5ft.10in</option>
                                    <option value="5ft.11in">5ft.11in</option>
                                    <option value="6ft.0in">6ft.0in</option>
                                    <option value="6ft.1in">6ft.1in</option>
                                    <option value="6ft.2in">6ft.2in</option>
                                    <option value="6ft.3in">6ft.3in</option>
                                    <option value="6ft.4in">6ft.4in</option>
                                    <option value="6ft.5in">6ft.5in</option>
                                    <option value="6ft.6in">6ft.6in</option>
                                    <option value="6ft.7in">6ft.7in</option>
                                    <option value="6ft.8in">6ft.8in</option>
                                    <option value="6ft.9in">6ft.9in</option>
                                    <option value="6ft.10in">6ft.10in</option>
                                    <option value="6ft.11in">6ft.11in</option>
                                    <option value="7ft.0in">7ft.0in</option>
                                    <option value="7ft.1in">7ft.1in</option>
                                    <option value="7ft.2in">7ft.2in</option>
                                    <option value="7ft.3in">7ft.3in</option>
                                    <option value="7ft.4in">7ft.4in</option>
                                    <option value="7ft.5in">7ft.5in</option>
                                </select>
                            </div>
                            <span style="visibility: hidden; color: red; font-size: 13px;" class="mb-2" id="heightError">Error</span>
                            <div class="input-group" id="genderInputOutline">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1" style="width: 42px;">
                                <i style="margin-left: 5px;" class="fas fa-male"></i></span>
                                </div>
                                <select class="form-control" id="genderInput">
                                    <option value="0" selected disabled>Select your Gender</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                            <span style="visibility: hidden; color: red; font-size: 13px;" id="genderError">Error</span>
                            <div class="input-group" id="ageInputOutline">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1"><i class="fas fa-circle"></i></i></span>
                                </div>
                                <input type="number" class="form-control" placeholder="Enter your age" aria-label="Age" aria-describedby="basic-addon1" id="ageInput" maxlength="2" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);">
                            </div>
                            <span style="visibility: hidden; color: red; font-size: 13px;" class="mb-2" id="ageError">Error</span>
                        </div>
                    </div>
                </div>
                <div id="step2Section" style="text-align: center;">
                    <span id="bmilabel" style="font-size: 22px">
                    Current Bmi : <span class="odometer">0.0</span>
                    </span>
                    <div>
                        <canvas width=250 height=150 id="gauge"></canvas>
                    </div>
                    <div id="bmiMsg"></div>
                </div>
                <div id="step3Section" style="text-align: center; display: none;">
                    <div class="input-group" id="cookingInputOutline">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1" style="width: 42px;">
                                <i style="margin-left: 3px;" class="fas fa-utensils"></i></span>
                        </div>
                        <select class="form-control" id="cookingInput">
                            <option value="0" selected disabled>Is Cooking Possible?</option>
                            <option value="yes">Yes, we have a cook</option>
                            <option value="no,_we_cook_ourselves">Yes, we cook ourselves</option>
                            <option value="no">No cooking possible</option>
                        </select>
                    </div>
                    <span style="visibility: hidden; color: red; font-size: 13px;" class="mb-2" id="cookingError">Error</span>
                    <div class="row" style="padding-left: 10px; padding-right: 10px;">
                        <p>Do you have any diseases / health issues?</p>
                    </div>
                    <div class="row">
                        <div class="col-sm-6" style="text-align: left; left: 3px;">
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="Knee Pain / Back Pain">Knee Pain / Back Pain
                                </label>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="Diabetes (Type 2)">Diabetes (Type 2
                                </label>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="Thyroid">Thyroid
                                </label>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="PCOD / PCOS">PCOD / PCOS
                                </label>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="BP">BP
                                </label>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="Cholesterol">Cholesterol
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-6" style="text-align: left; left: 3px;">
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="Cancer">Cancer
                                </label>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="Diabetes (Type 1)">Diabetes (Type 1)
                                </label>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="Liver failure transplant">Liver failure transplant
                                </label>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="Epilepsy / Parkinson's">Epilepsy / Parkinson's
                                </label>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="Others">Others
                                </label>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="checkbox" name="medical_condition" class="form-check-input" value="None of these">None of these
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="text-align: center;">
                        <span style="visibility: hidden; color: red; font-size: 13px;" class="mb-2" id="medicalError">Error</span>
                    </div>
                </div>
                <!-- Step 4 Start -->
                <div id="step4Section" style="text-align: center; display: none;">
                    <div class="input-group" id="addressInputOutline">
                        <textarea class="form-control" rows="2" id="addressInput" style="resize: none;" placeholder="Enter your address"></textarea>
                    </div>
                    <span style="visibility: hidden; color: red; font-size: 13px;" id="addressError">Error</span>
                    <div class="input-group" id="cityInputOutline">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1" style="width: 42px;">
                                <i class="far fa-building"></i></span>
                        </div>
                        <select class="form-control" id="cityInput">
                            <option value="" selected="" disabled="">Select your city</option>
                            <option value="Bangalore">Bangalore</option>
                            <option value="Hyderabad">Hyderabad</option>
                            <option value="Chennai">Chennai</option>
                            <option value="Delhi NCR">Delhi NCR</option>
                            <option value="Mumbai">Mumbai</option>
                        </select>
                    </div>
                    <span style="visibility: hidden; color: red; font-size: 13px;" id="cityError">Error</span>
                    <div class="input-group" id="pincodeInputOutline">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="pincodeIconSpan"><i class="fas fa-map-marker"></i></span>
                        </div>
                        <input type="number" id="pincodeInput" class="form-control" placeholder="Enter your Pincode" maxlength="6" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" aria-label="Pincode" aria-describedby="pincodeIconSpan">
                    </div>
                    <span style="visibility: hidden;  color: red; font-size: 13px;" class="mb-2" id="pincodeError">Error</span>
                    <div class="alert alert-danger" style="display: none;" id="pincodeMatchError">
                        gghiy
                    </div>
                </div>
                <!-- Step 4 End -->
                <!-- Step 5 Start -->
                <div id="step5Section" style="text-align: center; display: none;">
                    <div style="text-align: left;">
                        <p>Slots available for booking</p>
                    </div>
                    <div id="suggestedSection">
                    </div>
                    <button type="button" class="btn btn-outline-danger" id="step6Submit">Choose a future date</button>
                </div>
                <!-- Step 5 End -->
                <!--Step 6 Start -->
                <div id="step6Section" style="text-align: center; display: none;">
                    <div class="input-group" id="dateInputOutline">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="dateIconSpan">
                                <i class="fas fa-calendar-alt"></i>
                            </span>
                        </div>
                        <input style="background-color: #fff;" type="text" id='dateVal' class="form-control" placeholder="Select Preferred Date" aria-label="Date" aria-describedby="dateIconSpan">
                    </div>
                    <span style="visibility: hidden;  color: red; font-size: 13px;" class="mb-2" id="dateError">Error</span>
                    <div class="input-group" id="timeInputOutline">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1" style="width: 42px;">
                                <i class="fas fa-clock"></i>
                            </span>
                        </div>
                        <select class="form-control" id="timeInput">
                            <option value="0" selected disabled>Select preferred time</option>
                            <option value="2">12:00 pm - 01:30 pm</option>
                            <option value="3">03:00 pm - 04:30 pm</option>
                            <option value="4">05:30 pm - 07:00 pm</option>
                            <option value="5">08:00 pm - 09:30 pm</option>
                            <option value="1">09:30 am - 11:00 am (morning)</option>
                        </select>
                    </div>
                    <span style="visibility: hidden; color: red; font-size: 13px;" id="timeError">Error</span>
                    <div class="alert alert-danger" style="display: none;" id="msgToDisplay">
                        gghiy
                    </div>
                </div>
            </div>
            <div class="card-footer text-right">
                <button type="button" class="btn btn-danger" id="step1Submit">Check My BMI <i class="fas fa-chevron-right"></i></button>
                <button type="button" class="btn btn-outline-danger" id="backStep1" style="display: none"><i class="fas fa-chevron-left"></i> Back</button>
                <button type="button" class="btn btn-danger" id="step2Submit" style="display: none">Show me how to lose weight <i class="fas fa-chevron-right"></i></button>
                <button type="button" class="btn btn-danger" id="step3Submit" style="display: none">Next <i class="fas fa-chevron-right"></i></button>
                <button type="button" class="btn btn-danger" id="step4Submit" style="display: none">Next <i class="fas fa-chevron-right"></i>
                </button>
                <button type="button" class="btn btn-danger" id="step7Submit" style="display: none">Check
                </button>
            </div>
        </div>
    </div>
    <!-- The Custom Fail slot modal-->
    <div class="modal fade" id="customFailSlotModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header" style="text-align: center;">
                    <h4 class="modal-title">
                          <i style="color: #f18181" class="fas fa-exclamation-circle"></i> 
                          Sorry, the selected slot is not available.
                        </h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <p><i>Please select any of these recommended slots to book</i></p>
                    <div id="customBookSection">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Available slots Confirmation Modal -->
    <div class="modal fade" id="availableSlotModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header" style="text-align: center;">
                    <h3 class="modal-title">
                          <i style="color: #08b100" class="fas fa-check-circle"></i> Confirmation
                        </h3>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <p>Phone Number: <span style="color: #17a2d8" id="selPhn"></span></p>
                    <p>City <span style="color: #17a2d8" id="selCity"></span></p>
                    <p>Pincode <span style="color: #17a2d8" id="selPincode"></span></p>
                    <p>Selected slot: <span style="color: #17a2b8;" id="selTime">, </span>
                        <pan style="color: #17a2d8" id="selDate">
                            </span>
                    </p>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-success btn-sm" id="availableSlotBookBtn">Book Now</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Custom Slot Available Modal -->
    <div class="modal fade" id="customSuccessConfModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header" style="text-align: center;">
                    <h3 class="modal-title">
                          <i style="color: #08b100" class="fas fa-check-circle"></i> Available
                        </h3>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <p>Phone Number: <span style="color: #17a2d8" id="customPhn"></span></p>
                    <p>City: <span style="color: #17a2d8" id="customCity"></span></p>
                    <p>Pincode: <span style="color: #17a2d8" id="customPincode"></span></p>
                    <p>Selected slot: <span style="color: #17a2b8;" id="customTime">, </span>
                        <pan style="color: #17a2d8" id="customDate">
                            </span>
                    </p>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-success btn-sm" id="customSuccessBookBtn">Book Now</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Custom Fail Slot Confirmation Modal -->
    <div class="modal fade" id="customFailConfModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header" style="text-align: center;">
                    <h4 class="modal-title">
                          <i style="color: #08b100" class="fas fa-check-circle"></i> Confirmation
                        </h4>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <p>Phone Number: <span style="color: #17a2d8" id="customFailPhn"></span></p>
                    <p>City <span style="color: #17a2d8" id="customFailCity"></span></p>
                    <p>Pincode <span style="color: #17a2d8" id="customFailPincode"></span></p>
                    <p>Selected slot: <span style="color: #17a2b8;" id="customFailTime">, </span>
                        <pan style="color: #17a2d8" id="customFailDate">
                            </span>
                    </p>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-success btn-sm" id="customFailBookBtn">Book Now</button>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
    var suggestionSlotMsg;
    var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;
        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : sParameterName[1];
            }
        }
    };
    var phn = getUrlParameter('data_phone');
    var cityD = getUrlParameter('city');
    console.log("phn is " + phn + " and city is " + cityD);

    $(document).ready(function() {
        var step5html;
        var opts = {
            percentColors: [
                [0.0, "#e5e577"],
                [0.50, "#ffbb00"],
                [1.0, "#b90b17"]
            ],
            colorStop: '#FFE11C', // just experiment with them
            highDpiSupport: true, // High resolution support
            generateGradient: true,
        };

        selectGauge = new Gauge(document.getElementById("gauge"));
        selectGauge.maxValue = 35;
        selectGauge.setOptions(opts);

        flatpickr("#dateVal", {
            dateFormat: "d-m-Y",
            minDate: "today"
        });

        $("#step2Section").css("display", "none");
        $("#step1Submit").click(function() {
            var weightVal = $("#weightInput").val();
            var heightVal = $('#heightInput').find(":selected").val();
            var genderVal = $('#genderInput').find(":selected").val();
            var ageVal = $('#ageInput').val();
            var htValSplit = heightVal.split(".");
            var feet = parseInt(htValSplit[0]);
            var inch = parseInt(htValSplit[1]);

            if (weightVal == "") {
                $("#weightError").text("Enter weight");
                $("#weightError").css("visibility", "visible");
                $("#weightInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#weightError").css("visibility", "hidden");
                    $("#weightInput").removeClass("errorBorder");
                }, 2000);

            } else if (!weightVal.match(/^\s*-?\d+(\.\d{1,2})?\s*$/) || weightVal < 30 || weightVal > 200) {
                $("#weightError").text("Weight only between 30 & 200");
                $("#weightError").css("visibility", "visible");
                setTimeout(function() {
                    $("#weightError").css("visibility", "hidden");
                }, 2000);

            } else if (heightVal == "0") {
                $("#heightError").text("Select height");
                $("#heightError").css("visibility", "visible");
                $("#heightInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#heightError").css("visibility", "hidden");
                    $("#heightInput").removeClass("errorBorder");
                }, 2000);

            } else if (genderVal == "0") {
                $("#genderError").text("Select gender");
                $("#genderError").css("visibility", "visible");
                $("#genderInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#genderError").css("visibility", "hidden");
                    $("#genderInput").removeClass("errorBorder");
                }, 2000);

            } else if (ageVal == "") {
                $("#ageError").text("Enter Age");
                $("#ageError").css("visibility", "visible");
                $("#ageInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#ageError").css("visibility", "hidden");
                    $("#ageInput").removeClass("errorBorder");
                }, 2000);

            } else if (!ageVal.match(/^\d+$/) || ageVal < 10 || ageVal > 70) {
                $("#ageError").text("Age only between 10 & 70");
                $("#ageError").css("visibility", "visible");
                $("#ageInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#ageError").css("visibility", "hidden");
                    $("#ageInput").removeClass("errorBorder");
                }, 2000);

            } else {
                var result = ((weightVal * 10000) / ((feet * 30.48 + inch * 2.54) * (feet * 30.48 + inch * 2.54))).toFixed(2);
                var intResult = parseFloat(result);

                if (intResult >= 30) {
                    $("#bmiMsg").html("This is a bit alarming state <i class='fas fa-exclamation-circle' style='color: red;'></i>. With this high BMI, we highly recommend you take steps to reduce your weight NOW. You are already 80% more likely to develop the risk of coronary heart disease, diabetes, BP, Hypertension etc in future. The good news is it’s possible to reverse the weight scale. If you are looking to lose weight like 12000+ customers of ours, schedule a detailed weightloss consultation from our Weightloss Experts, NOW.<p class='ntlText' style='color:#0a6f96; margin-bottom: 0rem;'>By the way, you need to lose <span class='needToLoss'></span> Kgs more to reach your average weight, which is achievable, if we both are committed towards to it</p>");
                } else if (intResult < 30 && intResult >= 25) {
                    $("#bmiMsg").html("WATCH OUT! The scale is tilting towards the dreaded OBESE category, which is the genesis of heart diseases, diabetes, BP etc. Start now, start small, and tilt your weight scale back to NORMAL. Our weightloss experts can give you a detailed weightloss consultation worth Rs.750 for FREE, today.<p class='ntlText' style='color:#0a6f96; margin-bottom: 0rem;'>By the way, you need to lose <span class='needToLoss'></span> Kgs more to reach your average weight, which is achievable, if we both are committed towards to it</p>");
                } else if (intResult < 25 && intResult >= 23) {
                    $("#bmiMsg").html("Well, it’s a bit on the higher side. The tricky part is a little bit more, and you will be in the dreaded “Obese” Category, which is the genesis of heart diseases, diabetes, BP etc. Don’t worry, our weightloss experts can give you a weightloss consultation worth Rs.750 for FREE, today.<p class='ntlText' style='color:#0a6f96; margin-bottom: 0rem;'>By the way, you need to lose <span class='needToLoss'></span> Kgs more to reach your average weight, which is achievable, if we both are committed towards to it</p>");

                } else if (intResult <= 23 && intResult >= 18.5) {
                    $("#bmiMsg").html("<p>Congratulations! You have a healthy weight for your height. Maintaining this weight is the important part, not just now, but for a disease free future. How about starting with making healthier food choices eg. Teatox, Granola Bars, Amla Drink, Healthy Snacks etc.</p><br><a href='https://shop.truweight.in' class='btn btn-outline-info'>Click here to know how</a>");

                } else if (intResult < 18.5) {
                    $("#bmiMsg").html("<p>You seem to be underweight for your height. It's important to aim at keeping within your healthy weight range. Being in the healthy weight range will improve your body's ability to fight infection or illness. How about starting with making healthier food choices eg. Teatox, Granola Bars, Amla Drink, Healthy Snacks etc.</p><br><a href='https://shop.truweight.in' class='btn btn-outline-info'>Click here to know how</a>");
                }

                if (genderVal == "male" && intResult >= 23) {
                    if (feet == 4) {
                        var IBW = 50;
                    }
                    if (feet == 5) {
                        var IBW = 50 + (2.3 * inch);
                    }
                    if (feet == 6) {
                        var IBW = 50 + (2.3 * (inch + 10));
                    }
                    if (feet == 7) {
                        var IBW = 50 + (2.3 * (inch + 20));
                    }
                    var NTL = (weightVal - IBW) + 2;
                    $(".needToLoss").text(NTL.toFixed(1));

                } else if (genderVal == "female" && intResult >= 23) {
                    if (feet == 4) {
                        var IBW = 45.5;
                    }
                    if (feet == 5) {
                        var IBW = 45.5 + (2.3 * inch);
                    }
                    if (feet == 6) {
                        var IBW = 45.5 + (2.3 * (inch + 10));
                    }
                    if (feet == 7) {
                        var IBW = 45.5 + (2.3 * (inch + 20));
                    }
                    var NTL = (weightVal - IBW) + 2;
                    $(".needToLoss").text(NTL.toFixed(1));

                }
                if (genderVal == "male" && weightVal < 50) {
                    $(".ntlText").css("display", "none");
                }
                if (genderVal == "female" && weightVal < 45) {
                    $(".ntlText").css("display", "none");
                }

                var data = '[{"Attribute":"Phone","Value":"' + phn + '"},{"Attribute":"mx_height","Value":"' + heightVal + '"},{"Attribute":"mx_Weight_in_kg","Value":"' + weightVal + '"},{"Attribute":"mx_gender","Value":"' + genderVal + '"},{"Attribute":"mx_bmi","Value":"' + result + '"},{"Attribute":"mx_Age","Value":"' + ageVal + '"},{"Attribute":"mx_bmi_filled_from_form","Value":"true"}]';
                console.log("Step 1 data " + data);

                $.ajax({
                    url: '//heroku.truweight.in/post_leads_to_ls',
                    //url: "/nw",
                    type: 'post',
                    data: data
                });
                $("#step1Section").css("display", "none");
                $("#step2Section").fadeIn();
                selectGauge.set(intResult);
                $('.odometer').html(intResult);
                $("#step1Submit").css("display", "none");
                $("#backStep1").css("display", "initial");
                $("#step2Submit").css("display", "initial");

                if (intResult <= 23 && intResult >= 18.5) {
                    $("#step2Submit").css("display", "none");
                }
                if (intResult < 18.5) {
                    $("#step2Submit").css("display", "none");
                }
            }
        });

        $("#backStep1").click(function() {
            $("#step2Section").css("display", "none");
            $("#step1Section").fadeIn("slow");
            $("#step1Submit").css("display", "initial");
            $("#backStep1").css("display", "none");
            $("#step2Submit").css("display", "none");
        });

        $("#step2Submit").click(function() {
            $("#step2Section").css("display", "none");
            $("#step3Section").fadeIn("slow");
            $("#step3Submit").css("display", "initial");
            $("#backStep1").css("display", "none");
            $("#step2Submit").css("display", "none");
            $("#titleMsg").text('You are 1 step closer to getting a personalized weight loss consultation, worth Rs.750 for FREE today.');
        });

        $("#step3Submit").click(function() {

            var cookingVal = $('#cookingInput').find(":selected").val();
            var medical_data = $('input[name="medical_condition"]:checked').map(function() {
                return this.value;
            }).get().join(",");

            if (cookingVal == "0") {
                $("#cookingError").text("Select Cooking preference");
                $("#cookingError").css("visibility", "visible");
                $("#cookingInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#cookingError").css("visibility", "hidden");
                    $("#cookingInput").removeClass("errorBorder");
                }, 2000);

            } else if (medical_data == "") {
                $("#medicalError").text("Select medical data");
                $("#medicalError").css("visibility", "visible");
                setTimeout(function() {
                    $("#medicalError").css("visibility", "hidden");
                }, 2000);
            } else {

                var m_data = '[{"Attribute":"Phone","Value":"' + phn + '"},{"Attribute":"mx_diseases","Value":"' + medical_data + '"},{"Attribute":"mx_have_a_cook_at_home","Value":"' + cookingVal + '"},{"Attribute":"mx_disease_filled_from_form","Value":"true"}]';
                console.log("Step 2 data " + m_data);
                $.ajax({
                    url: '//heroku.truweight.in/post_leads_to_ls',
                    //url: "/nw3",
                    type: 'post',
                    data: m_data
                });

                $("#step3Section").css("display", "none");
                $("#step4Section").fadeIn("slow");
                $("#step4Submit").css("display", "initial");
                $("#step3Submit").css("display", "none");
            }
        });

        var cityVal;
        var addressVal;
        var pincodeVal;

        $("#step4Submit").click(function() {
            cityVal = $('#cityInput').find(":selected").val();
            addressVal = $("#addressInput").val();
            pincodeVal = $("#pincodeInput").val();

            if (addressVal == "") {
                $("#addressError").text("Enter your Address");
                $("#addressError").css("visibility", "visible");
                $("#addressInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#addressError").css("visibility", "hidden");
                    $("#addressInput").removeClass("errorBorder");
                }, 2000);

            } else if (addressVal == "") {
                $("#addressError").text("Enter your Address");
                $("#addressError").css("visibility", "visible");
                $("#addressInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#addressError").css("visibility", "hidden");
                    $("#addressInput").removeClass("errorBorder");
                }, 2000);

            } else if (cityVal == "") {
                $("#cityError").text("Select your City");
                $("#cityError").css("visibility", "visible");
                $("#cityInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#cityError").css("visibility", "hidden");
                    $("#cityInput").removeClass("errorBorder");
                }, 2000);
            } else if (pincodeVal == "") {
                $("#pincodeError").text("Enter a pincode");
                $("#pincodeError").css("visibility", "visible");
                $("#pincodeInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#pincodeError").css("visibility", "hidden");
                    $("#pincodeInput").removeClass("errorBorder");
                }, 2000);

            } else if (addressVal.length < 50) {
                $("#addressError").text("Address should be at least 50 characters");
                $("#addressError").css("visibility", "visible");
                $("#addressInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#addressError").css("visibility", "hidden");
                    $("#addressInput").removeClass("errorBorder");
                }, 2000);

            } else if (!pincodeVal.match(/^\d+$/)) {
                $("#pincodeError").text("Enter a valid pincode");
                $("#pincodeError").css("visibility", "visible");
                $("#pincodeInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#pincodeError").css("visibility", "hidden");
                    $("#pincodeInput").removeClass("errorBorder");
                }, 2000);

            } else if (pincodeVal.length != 6) {
                $("#pincodeError").text("Enter a valid pincode");
                $("#pincodeError").css("visibility", "visible");
                $("#pincodeInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#pincodeError").css("visibility", "hidden");
                    $("#pincodeInput").removeClass("errorBorder");
                }, 2000);

            } else {
                $("#step4Submit").html("<i class='fas fa-circle-notch fa-spin'></i> Checking for slots");

                var addressData = '[{"Attribute":"mx_address","Value":"' + addressVal + '"},{"Attribute":"mx_Zip","Value":"' + pincodeVal + '"},{"Attribute":"mx_city_consultation","Value":"' + cityVal + '"},{"Attribute":"Phone","Value":"' + phn + '"}]';
                console.log(addressData);
                $.ajax({
                    url: '//heroku.truweight.in/post_leads_to_ls',
                    type: 'post',
                    data: addressData,
                    success: function(data) {
                        console.log("Address data sent to LS");
                    }
                });

                console.log("api calling");
                $.ajax({
                    type: 'POST',
                    url: "https://billing.truweight.in/show_recommended_slots?city=" + cityVal + "&pincode=" + pincodeVal,
                    success: function(data) {
                        if (data.status == false) {
                            $("#step4Submit").html("Check again");
                            $("#pincodeMatchError").fadeIn().delay(3000).fadeOut(500).text(data.message);
                        } else {
                            suggestionSlotMsg = data;
                            var obj = suggestionSlotMsg;
                            var recslots = [];
                            var newObj = obj.slot_available_for_dates;
                            Object.keys(newObj).forEach(function(key, value) {
                                var newV = newObj[key];
                                var keyChange = key.split("-");
                                var newKey = keyChange[1] + '-' + keyChange[0] + '-' + keyChange[2];
                                var dayNumOfWeek = Date.parse(key);
                                var dayStrOfWeek = new Date(dayNumOfWeek);
                                var selDayOfWeek = (dayStrOfWeek.toString()).split(" ");
                                html = '';
                                html += '<div class="card text-left" style="margin-bottom: 6px"><div class="card-body">' +
                                    '<p style="font-size: 18px;">For ' + selDayOfWeek[0] + ', ' + newKey + '</p>';
                                for (var i = 0; i < newV.length; i++) {
                                    var newUpdatedTimeSlot = obj.slot_available_for_dates[key][i];
                                    html += '<button type="button" class="btn btn-outline-info recBtn" data-time="' + newUpdatedTimeSlot +
                                        '" data-date="' + newKey + '" data-mmdate="' + key + '">' + newUpdatedTimeSlot + '</button>&nbsp;&nbsp;';
                                }
                                html += '</div></div>';
                                recslots.push(html);
                            });
                            $('#suggestedSection').html(recslots);
                            $("#step4Section").css("display", "none");
                            $("#step4Submit").css("display", "none");
                            $("#step5Section").fadeIn();
                        }
                    }
                });
            }
        });

        var availableSlotDate;
        var availableSlotTime;
        var availableSlotBookedData;
        var revDate;
        $(document).on("click", ".recBtn", function() {

            availableSlotTime = $(this).attr("data-time");
            availableSlotDate = $(this).attr("data-date");
            revDate = $(this).attr("data-mmdate");
            var dayNumOfWeek = Date.parse(revDate);
            var dayStrOfWeek = new Date(dayNumOfWeek);
            var selDayOfWeek = (dayStrOfWeek.toString()).split(" ");
            //SENDING TIME TO post_leads_to_ls should always be in IST am-pm format
            availableSlotBookedData = '[{"Attribute":"mx_Disposition","Value":"Interested"},{"Attribute":"mx_SubDisposition","Value":"Home Visit Scheduled"},,{"Attribute":"mx_walk_in_date","Value":"' + revDate + '"},{"Attribute":"mx_walk_in_time","Value":"' + availableSlotTime + '"},{"Attribute":"Phone","Value":"' + phn + '"},{"Attribute":"mx_appointment_date_filled_from_form","Value":"true"}]';
            $("#selTime").text(availableSlotTime);
            $("#selDate").text(selDayOfWeek[0] + ", " + availableSlotDate);
            $("#selCity").text(cityVal);
            $("#selPhn").text(phn)
            $("#selPincode").text(pincodeVal);
            $("#availableSlotModal").modal();
        });

        $("#availableSlotBookBtn").click(function() {
            $("#availableSlotBookBtn").html("<i class='fas fa-circle-notch fa-spin'></i> Booking your slot");
            $("#availableSlotBookBtn").attr("disabled", "disabled");
            console.log("availableSlotBookBtn data " + availableSlotBookedData);
            $("#recBookBtn").html("<i class='fas fa-circle-notch fa-spin'></i> Booking your slot");
            $.ajax({
                url: '//heroku.truweight.in/post_leads_to_ls',
                type: 'post',
                data: availableSlotBookedData,
                success: function(data) {
                    setTimeout(function() {
                        window.location.href = "https://get.truweight.in/thank-you/?data_phone=" + phn;
                    }, 1000);
                },
                error: function(data) {
                    setTimeout(function() {
                        alert("Success, redirect to thank you page when live");
                        window.location.href = "https://get.truweight.in/thank-you/?data_phone=" + phn;
                    }, 1000);
                }
            });
        });

        $("#step6Submit").click(function() {
            $("#step5Section").css("display", "none");
            $("#step6Section").fadeIn();
            $("#step7Submit").css("display", "initial");
        });

        $("#step7Submit").click(function() {
            $('#step7Submit').html("<i class='fas fa-circle-notch fa-spin'></i> Checking for slots");
            $("#step7Submit").attr("disabled", "disabled");
            var dateSelectedVal = $("#dateVal").val();
            var timeSelectedVal = $('#timeInput').find(":selected").val();
            var timetoDisplay = $('#timeInput').find(":selected").text();
            if (dateSelectedVal == "") {
                $("#dateError").text("Select Cooking preference");
                $("#dateError").css("visibility", "visible");
                $("#dateVal").addClass("errorBorder");
                setTimeout(function() {
                    $("#dateError").css("visibility", "hidden");
                    $("#dateVal").removeClass("errorBorder");
                }, 2000);

            } else if (timeSelectedVal == "0") {
                $("#timeError").text("Select Cooking preference");
                $("#timeError").css("visibility", "visible");
                $("#timeInput").addClass("errorBorder");
                setTimeout(function() {
                    $("#timeError").css("visibility", "hidden");
                    $("#timeInput").removeClass("errorBorder");
                }, 2000);
            } else {

                $.post('https://billing.truweight.in/time_slot_for_long_form?date=' + dateSelectedVal + '&time=' + timeSelectedVal + '&city=' + cityVal + '&pincode=' + pincodeVal + '&category_type=true', "", function(returnedData) {
                    console.log(returnedData);
                    if (returnedData.status == true) {

                        $("#customCity").text(cityVal);
                        $("#customPhn").text(phn);
                        $("#customPincode").text(pincodeVal);
                        var nowTime = timetoDisplay.split("-")[0];
                        nowTime = nowTime.trim();
                        $("#customTime").text(nowTime);
                        console.log("dateSelectedVal" + dateSelectedVal);
                        var dateChange = dateSelectedVal.split("-");
                        var newDate = dateChange[1] + '-' + dateChange[0] + '-' + dateChange[2];
                        var dayNumOfWeek = Date.parse(newDate);
                        var dayStrOfWeek = new Date(dayNumOfWeek);
                        var selDayOfWeek = (dayStrOfWeek.toString()).split(" ");
                        $("#customDate").text(selDayOfWeek[0] + ", " + dateSelectedVal);
                        $('#customSuccessBookBtn').attr('data-time', nowTime);
                        $('#customSuccessBookBtn').attr('data-dateval', newDate);
                        $("#customSuccessConfModal").modal();
                        $('#step7Submit').html("Check");
                        $("#step7Submit").removeAttr("disabled", "disabled");
                    }

                    if (returnedData.message == "Selected date is already past") {
                        $('#step7Submit').html("Check again");
                        $("#step7Submit").removeAttr("disabled", "disabled");
                        $("#msgToDisplay").text("Seems like you have selected a past Time");
                        $("#msgToDisplay").fadeIn().delay(3000).fadeOut(500).text("Seems like you have selected a past date");
                    }

                    if (returnedData.message == "Selected Slot is not available") {
                        var recMsg;
                        var obj = returnedData;
                        var recslots = [];
                        Object.keys(obj.slot_available_for_dates).forEach(function(key) {
                            var newV = obj.slot_available_for_dates[key];
                            Object.keys(newV).forEach(function(key1, value) {
                                var date = obj.slot_available_for_dates[key][value + 1];
                                var newUpdatedDate = date.split(",")[2].slice(0, -2) + " " + date.split(",")[3];

                                var originalDate = new Date(newUpdatedDate).getDate() + "-" + (new Date(newUpdatedDate).getMonth() + 1) + "-" + new Date(newUpdatedDate).getFullYear();

                                var originalTime = date.split(",")[0];

                                recslots.push("<div class='card' style='margin-bottom: 6px;'><div class='card-body card-bodySugg' style='padding: 0.8rem;'>" + date + " <button type='button'class='btn btn-outline-info btn-sm customFailSlotBtn' data-date='" + originalDate + "' data-time='" + originalTime.trim() + "'>Book this slot</button></div></div>");
                            });
                        });
                        recMsg = recslots.join(" ");
                        $("#customBookSection").html(recMsg);
                        $("#customFailSlotModal").modal();
                    }
                });
            }
        });



        $("#customSuccessBookBtn").click(function() {
            $("#customSuccessBookBtn").attr("disabled", "disabled");
            $("#customSuccessBookBtn").html("<i class='fas fa-circle-notch fa-spin'></i> Booking your slot");
            var dateCustomSuccess = $(this).attr("data-dateval");
            var timeCustomSuccess = $(this).attr("data-time");
            console.log("current date " + dateCustomSuccess);
            var customSuccessBookData = '[{"Attribute":"mx_Disposition","Value":"Interested"},{"Attribute":"mx_SubDisposition","Value":"Home Visit Scheduled"},{"Attribute":"mx_walk_in_date","Value":"' + dateCustomSuccess + '"},{"Attribute":"mx_walk_in_time","Value":"' + timeCustomSuccess + '"},{"Attribute":"Phone","Value":"' + phn + '"},{"Attribute":"mx_appointment_date_filled_from_form","Value":"true"}]';
            console.log("Custom Date time success Data" + customSuccessBookData);
            $.ajax({
                url: '//heroku.truweight.in/post_leads_to_ls',
                type: 'post',    
                data: customSuccessBookData,
                success: function(data) {
                    setTimeout(function() {

                        window.location.href = "https://get.truweight.in/thank-you/?data_phone=" + phn;
                    }, 1000);
                },
                error: function(data) {
                    setTimeout(function() {

                        window.location.href = "https://get.truweight.in/thank-you/?data_phone=" + phn;
                    }, 1000);
                }
            });
        });

        var customFailSlotBookData;
        $(document).on("click", ".customFailSlotBtn", function() {
            var date = $(this).attr("data-date");
            var time = $(this).attr("data-time");
            var dateChange = date.split("-");
            var newDate = dateChange[1] + '-' + dateChange[0] + '-' + dateChange[2];
            var dayNumOfWeek = Date.parse(newDate);
            var dayStrOfWeek = new Date(dayNumOfWeek);
            var selDayOfWeek = (dayStrOfWeek.toString()).split(" ");

            if (time == "8 pm") {
                time = "8:00 pm";
            }
            if (time == "3 pm") {
                time = "3:00 pm";
            }
            if (time == "12 noon") {
                time = "12:00 pm";
            }
            customFailSlotBookData = '[{"Attribute":"mx_Disposition","Value":"Interested"},{"Attribute":"mx_SubDisposition","Value":"Home Visit Scheduled"},,{"Attribute":"mx_walk_in_date","Value":"' + newDate + '"},,{"Attribute":"mx_walk_in_time","Value":"' + time + '"},{"Attribute":"Phone","Value":"' + phn + '"},{"Attribute":"mx_appointment_date_filled_from_form","Value":"true"}]';
            console.log("Requested slot not available Book Now Data\n" + customFailSlotBookData);
            $("#customFailSlotModal").modal('hide');
            $("#customFailPhn").text(phn);
            $("#customFailCity").text(cityVal);
            $("#customFailPincode").text(pincodeVal);
            $("#customFailTime").text(time + ", " +selDayOfWeek[0]);
            $("#customFailDate").text(date);
            $("#customFailConfModal").modal();
            
            $.ajax({
                url: '//heroku.truweight.in/post_leads_to_ls',
                type: 'post',
                data: bookedNowDataSug,
                success: function(data) {
                    setTimeout(function() {
                        window.location.href = "https://get.truweight.in/thank-you/?data_phone=" + phn;
                    }, 1000);
                },
                error: function(data) {
                    setTimeout(function() {
                        window.location.href = "https://get.truweight.in/thank-you/?data_phone=" + phn;
                    }, 1000);
                }
            });

        });

        $("#customFailBookBtn").click(function() {
            $("#customFailBookBtn").attr("disabled", "disabled");
            $("#customFailBookBtn").html("<i class='fas fa-circle-notch fa-spin'></i> Booking your slot");
            $.ajax({
                url: '//heroku.truweight.in/post_leads_to_ls',
                type: 'post',    
                data: customFailSlotBookData,
                success: function(data) {
                    setTimeout(function() {

                        window.location.href = "https://get.truweight.in/thank-you/?data_phone=" + phn;
                    }, 1000);
                },
                error: function(data) {
                    setTimeout(function() {

                        window.location.href = "https://get.truweight.in/thank-you/?data_phone=" + phn;
                    }, 1000);
                }
            });
        });


    });
    </script>
</body>

</html>